<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0a0e27">
    <meta name="description" content="Solo Leveling System - Level up your real life">
    <title>Solo Leveling System</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Overlay Notification Container -->
    <div id="notification-overlay"></div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2 class="neon-text">Initializing System...</h2>
        </div>
    </div>

    <!-- Main Container -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo neon-text">SOLO LEVELING</h1>
                <div class="header-stats">
                    <div class="stat-mini">
                        <span class="stat-label">Level</span>
                        <span id="header-level" class="stat-value">1</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-label">Rank</span>
                        <span id="header-rank" class="stat-value rank-E">E</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="dashboard">
                <span class="nav-icon">‚ö°</span>
                <span class="nav-label">Dashboard</span>
            </button>
            <button class="nav-btn" data-page="quests">
                <span class="nav-icon">üìã</span>
                <span class="nav-label">Quests</span>
            </button>
            <button class="nav-btn" data-page="skills">
                <span class="nav-icon">üåü</span>
                <span class="nav-label">Skills</span>
            </button>
            <button class="nav-btn" data-page="stats">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Stats</span>
            </button>
            <button class="nav-btn" data-page="achievements">
                <span class="nav-icon">üèÜ</span>
                <span class="nav-label">Achievements</span>
            </button>
            <button class="nav-btn" data-page="assistant">
                <span class="nav-icon">ü§ñ</span>
                <span class="nav-label">AI</span>
            </button>
            <button class="nav-btn" id="more-menu-btn">
                <span class="nav-icon">‚ãØ</span>
                <span class="nav-label">More</span>
            </button>
        </nav>

        <!-- More Menu (Hidden by default) -->
        <div id="more-menu" class="more-menu" style="display: none;">
            <div class="more-menu-overlay" id="more-menu-overlay"></div>
            <div class="more-menu-content">
                <div class="more-menu-header">
                    <h3>More Options</h3>
                    <button class="more-menu-close" id="more-menu-close">&times;</button>
                </div>
                <div class="more-menu-items">
                    <button class="more-menu-item" data-page="shop">
                        <span class="more-menu-icon">üõí</span>
                        <span class="more-menu-label">Shop</span>
                    </button>
                    <button class="more-menu-item" data-page="inventory">
                        <span class="more-menu-icon">üéí</span>
                        <span class="more-menu-label">Inventory</span>
                    </button>
                    <button class="more-menu-item" data-page="history">
                        <span class="more-menu-icon">üìú</span>
                        <span class="more-menu-label">History</span>
                    </button>
                    <button class="more-menu-item" data-page="settings">
                        <span class="more-menu-icon">‚öôÔ∏è</span>
                        <span class="more-menu-label">Settings</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <section id="page-dashboard" class="page active">
            <div class="page-content">
                <!-- Avatar Section -->
                <div class="glass-panel avatar-section">
                    <div class="avatar-container">
                        <div id="avatar-display" class="avatar-display">
                            <div class="avatar-glow"></div>
                            <div class="avatar-level-badge" id="avatar-level-badge">1</div>
                        </div>
                        <h2 id="player-name" class="player-name">Hunter</h2>
                        <p id="player-rank" class="player-rank rank-E">Rank: E</p>
                    </div>
                </div>

                <!-- Energy/Focus Bars -->
                <div id="energy-bars-container"></div>

                <!-- XP Progress Bar -->
                <div class="glass-panel xp-panel">
                    <div class="xp-header">
                        <span class="xp-label">Experience Points</span>
                        <span id="xp-display" class="xp-amount">0 / 100</span>
                    </div>
                    <div class="xp-bar-container">
                        <div id="xp-bar" class="xp-bar"></div>
                    </div>
                    <div class="xp-info">
                        <span>Next Level: <span id="xp-next-level">100</span> XP</span>
                    </div>
                </div>

                <!-- Active Quests Preview -->
                <div class="glass-panel">
                    <h3 class="panel-title">Active Quests</h3>
                    <div id="active-quests-list" class="quests-preview">
                        <p class="empty-state">No active quests</p>
                    </div>
                    <button class="btn-primary" onclick="navigateTo('quests')">View All Quests</button>
                </div>

                <!-- Skill Points Summary -->
                <div class="glass-panel">
                    <h3 class="panel-title">Available Skill Points</h3>
                    <div class="skill-points-display">
                        <span id="skill-points-count" class="skill-points-value">0</span>
                        <button id="btn-use-skill-points" class="btn-secondary">Allocate</button>
                    </div>
                </div>

                <!-- Material Rewards Summary -->
                <div class="glass-panel">
                    <h3 class="panel-title">Material Assets</h3>
                    <div id="material-rewards-display" class="material-rewards-display">
                        <div class="material-item">
                            <span class="material-icon">üí∞</span>
                            <span class="material-label">Money:</span>
                            <span id="material-money" class="material-value">$0</span>
                        </div>
                        <div class="material-item">
                            <span class="material-icon">‚≠ê</span>
                            <span class="material-label">Influence:</span>
                            <span id="material-influence" class="material-value">0</span>
                        </div>
                        <div class="material-item">
                            <span class="material-icon">üë•</span>
                            <span class="material-label">Allies:</span>
                            <span id="material-allies" class="material-value">0</span>
                        </div>
                    </div>
                </div>

                <!-- AI System Messages -->
                <div class="glass-panel ai-message-panel">
                    <h3 class="panel-title">System Message</h3>
                    <div id="ai-message-content" class="ai-message-content">
                        Welcome, Hunter. Begin your journey to become stronger.
                    </div>
                </div>

                <!-- Prayer Times -->
                <div class="glass-panel prayer-times-panel" id="prayer-times-panel">
                    <h3 class="panel-title">Prayer Times</h3>
                    <div id="prayer-times-list" class="prayer-times-list"></div>
                </div>
            </div>
        </section>

        <!-- Quests Page -->
        <section id="page-quests" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Quests</h2>
                </div>

                <div id="quests-container" class="quests-container">
                    <!-- Quests will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- Skills Page -->
        <section id="page-skills" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Skill Tree</h2>
                    <div class="skill-points-header">
                        <span>Available Points: <strong id="skill-points-header">0</strong></span>
                    </div>
                </div>

                <!-- Stat Allocation UI -->
                <div id="stat-allocation-container"></div>

                <!-- Active Skills Section -->
                <div id="active-skills-container"></div>

                <!-- Passive Skills Section -->
                <div id="passive-skills-container"></div>

                <!-- Skill Tree -->
                <div id="skill-tree-container" class="skill-tree-container">
                    <!-- Skill tree will be dynamically loaded here -->
                </div>

                <!-- Crafting Section -->
                <div id="crafting-container" style="margin-top: 2rem;"></div>

                <!-- Instant Dungeons Section -->
                <div id="instant-dungeons-container" style="margin-top: 2rem;"></div>
            </div>
        </section>

        <!-- Stats Page -->
        <section id="page-stats" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Statistics</h2>
                </div>

                <!-- Stat Allocation UI -->
                <div id="stat-allocation-container"></div>

                <div class="stats-grid">
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">üí™</div>
                        <div class="stat-info">
                            <span class="stat-name">Strength</span>
                            <span id="stat-strength" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">üß†</div>
                        <div class="stat-info">
                            <span class="stat-name">Intelligence</span>
                            <span id="stat-intelligence" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-info">
                            <span class="stat-name">Strategy</span>
                            <span id="stat-strategy" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">üõ°Ô∏è</div>
                        <div class="stat-info">
                            <span class="stat-name">Endurance</span>
                            <span id="stat-endurance" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">‚ú®</div>
                        <div class="stat-info">
                            <span class="stat-name">Wisdom</span>
                            <span id="stat-wisdom" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">ü§ù</div>
                        <div class="stat-info">
                            <span class="stat-name">Social</span>
                            <span id="stat-social" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">‚öïÔ∏è</div>
                        <div class="stat-info">
                            <span class="stat-name">Medical</span>
                            <span id="stat-medical" class="stat-number">0</span>
                        </div>
                    </div>
                    <div class="stat-card glass-panel">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <span class="stat-name">Financial</span>
                            <span id="stat-financial" class="stat-number">0</span>
                        </div>
                    </div>
                </div>

                <!-- Rank Progression -->
                <div class="glass-panel rank-progression">
                    <h3 class="panel-title">Rank Progression</h3>
                    <div class="rank-bar">
                        <div id="rank-progress" class="rank-progress"></div>
                    </div>
                    <div class="rank-info">
                        <span>Current: <span id="current-rank-display" class="rank-E">E</span></span>
                        <span>Next: <span id="next-rank-display" class="rank-D">D</span></span>
                    </div>
                </div>

                <!-- Quest Analytics Dashboard -->
                <div id="quest-analytics-dashboard"></div>

                <!-- Progress Charts -->
                <div id="xp-chart-container" style="margin-top: 1rem;"></div>
                <div id="quest-chart-container" style="margin-top: 1rem;"></div>
            </div>
        </section>

        <!-- AI Assistant Page -->
        <section id="page-assistant" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">AI Memory & Journal</h2>
                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                        <span id="ai-online-status" class="status-badge" style="padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.85rem; background: var(--bg-secondary);">
                            <span id="ai-status-indicator" style="color: #ef4444;">‚óè</span> 
                            <span id="ai-status-text">Offline</span>
                        </span>
                    </div>
                </div>

                <!-- Tab Selector for Journal/Reports -->
                <div class="glass-panel" style="margin-bottom: 1rem; padding: 0.5rem;">
                    <div style="display: flex; gap: 0.5rem; border-bottom: 1px solid var(--border-color);">
                        <button class="journal-tab-btn active" data-tab="journal" style="flex: 1; padding: 0.75rem; background: transparent; border: none; color: var(--text-primary); border-bottom: 2px solid var(--neon-blue); cursor: pointer;">
                            üìù Journal
                        </button>
                        <button class="journal-tab-btn" data-tab="quest-reports" style="flex: 1; padding: 0.75rem; background: transparent; border: none; color: var(--text-secondary); cursor: pointer;">
                            ‚öîÔ∏è Quest Reports
                        </button>
                        <button class="journal-tab-btn" data-tab="purchases" style="flex: 1; padding: 0.75rem; background: transparent; border: none; color: var(--text-secondary); cursor: pointer;">
                            üõí Purchases
                        </button>
                    </div>
                </div>

                <!-- Journal Tab Content -->
                <div id="journal-tab-content" class="journal-tab-content active">
                    <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                        <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Share Your Life</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">
                            Tell me about your day, life experiences, goals, challenges, or anything you want me to remember. 
                            I'll analyze this information to help you level up through personalized quests.
                        </p>
                    </div>
                </div>

                <!-- Quest Reports Tab Content -->
                <div id="quest-reports-tab-content" class="journal-tab-content" style="display: none;">
                    <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                        <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Quest Completion Reports</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">
                            Report how you completed your quests in real life. Describe what you did, what happened, what you learned, and the results. 
                            The system will analyze your report and generate rewards based on your real-world achievements.
                        </p>
                    </div>
                    <div id="active-quests-for-report" class="glass-panel" style="margin-bottom: 1rem; padding: 1rem;">
                        <h4 style="margin: 0 0 0.75rem 0; color: var(--text-primary);">Active Quests</h4>
                        <div id="active-quests-list-reports"></div>
                    </div>
                </div>

                <!-- Purchases Tab Content -->
                <div id="purchases-tab-content" class="journal-tab-content" style="display: none;">
                    <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                        <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Report Real-World Purchases</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">
                            Did you buy a book, course, tool, or service that helps you level up? Report it here! 
                            The system will add it to your inventory and track how it helps your growth.
                        </p>
                    </div>
                    <div id="purchase-history-container"></div>
                </div>

                <!-- Journal Search & Filters -->
                <div class="glass-panel" style="margin-bottom: 1rem; padding: 1rem;">
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.75rem; flex-wrap: wrap;">
                        <input 
                            type="text" 
                            id="journal-search-input" 
                            placeholder="Search entries..." 
                            style="flex: 1; min-width: 200px; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                        >
                        <select id="journal-filter-category" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                            <option value="">All Categories</option>
                            <option value="career">Career</option>
                            <option value="learning">Learning</option>
                            <option value="health">Health</option>
                            <option value="finance">Finance</option>
                            <option value="social">Social</option>
                            <option value="personal_growth">Personal Growth</option>
                            <option value="challenges">Challenges</option>
                        </select>
                        <select id="journal-filter-sentiment" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                            <option value="">All Sentiments</option>
                            <option value="positive">Positive</option>
                            <option value="negative">Negative</option>
                            <option value="neutral">Neutral</option>
                        </select>
                        <select id="journal-filter-analyzed" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                            <option value="">All Entries</option>
                            <option value="true">Analyzed</option>
                            <option value="false">Pending</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button id="btn-journal-clear-filters" class="btn-secondary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">
                            Clear Filters
                        </button>
                        <span id="journal-search-results-count" style="color: var(--text-secondary); font-size: 0.85rem; align-self: center; margin-left: auto;">
                            Showing all entries
                        </span>
                    </div>
                </div>

                <div class="assistant-container">
                    <div id="ai-journal-entries" class="journal-entries-container" style="max-height: calc(100vh - 500px); overflow-y: auto; margin-bottom: 1rem;">
                        <!-- Journal entries will be displayed here -->
                    </div>

                    <!-- Dynamic Input Container (changes based on active tab) -->
                    <div class="assistant-input-container" style="position: sticky; bottom: 0; background: var(--bg-primary); padding: 1rem; border-top: 1px solid var(--border-color);">
                        <!-- Journal Input -->
                        <div id="journal-input-section">
                            <textarea 
                                id="ai-journal-input" 
                                class="assistant-input" 
                                placeholder="Share your thoughts, experiences, goals, challenges... (Works offline)"
                                rows="3"
                                style="resize: vertical; min-height: 80px; font-family: inherit; width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                            ></textarea>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button id="btn-ai-voice-record" class="btn-secondary" style="flex: 0 0 auto; display: none;">
                                    <span style="margin-right: 0.5rem;">üé§</span> Voice
                                </button>
                                <button id="btn-save-journal-entry" class="btn-primary" style="flex: 1;">
                                    Save Entry
                                </button>
                            </div>
                        </div>

                        <!-- Quest Report Input -->
                        <div id="quest-report-input-section" style="display: none;">
                            <select id="quest-select-for-report" style="width: 100%; padding: 0.75rem; margin-bottom: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                                <option value="">Select a quest to report...</option>
                            </select>
                            <textarea 
                                id="quest-report-input" 
                                class="assistant-input" 
                                placeholder="Describe how you completed this quest in real life. What did you do? What happened? What did you learn? What were the results? Include details about money earned, items acquired, people you met, etc."
                                rows="4"
                                style="resize: vertical; min-height: 100px; font-family: inherit; width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                            ></textarea>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button id="btn-quest-report-voice" class="btn-secondary" style="flex: 0 0 auto; display: none;">
                                    <span style="margin-right: 0.5rem;">üé§</span> Voice
                                </button>
                                <button id="btn-submit-quest-report" class="btn-primary" style="flex: 1;">
                                    Submit Report
                                </button>
                            </div>
                        </div>

                        <!-- Purchase Report Input -->
                        <div id="purchase-report-input-section" style="display: none;">
                            <select id="purchase-type-select" style="width: 100%; padding: 0.75rem; margin-bottom: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                                <option value="">Select purchase type...</option>
                                <option value="book">üìö Book</option>
                                <option value="course">üéì Course/Training</option>
                                <option value="tool">üõ†Ô∏è Tool/Equipment</option>
                                <option value="service">üíº Service</option>
                                <option value="software">üíª Software/App</option>
                                <option value="other">üì¶ Other</option>
                            </select>
                            <input 
                                type="text" 
                                id="purchase-name-input" 
                                placeholder="Item name (e.g., 'The Art of War by Sun Tzu')"
                                style="width: 100%; padding: 0.75rem; margin-bottom: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                            >
                            <input 
                                type="number" 
                                id="purchase-cost-input" 
                                placeholder="Cost (optional)"
                                style="width: 100%; padding: 0.75rem; margin-bottom: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                            >
                            <textarea 
                                id="purchase-description-input" 
                                placeholder="How will this help you level up? What skills/stats will it improve?"
                                rows="3"
                                style="resize: vertical; min-height: 80px; font-family: inherit; width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                            ></textarea>
                            <button id="btn-submit-purchase" class="btn-primary" style="width: 100%; margin-top: 0.5rem;">
                                Report Purchase
                            </button>
                        </div>

                        <div id="ai-analysis-status" style="display: none; margin-top: 0.5rem; padding: 0.75rem; background: var(--bg-secondary); border-radius: 8px; color: var(--text-secondary); font-size: 0.9rem;">
                            <div class="loading-spinner" style="width: 16px; height: 16px; margin-right: 0.5rem; display: inline-block;"></div>
                            <span>Analyzing your entry and generating insights...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Page -->
        <section id="page-achievements" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Achievements</h2>
                </div>

                <!-- Streak Display -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Daily Streak</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Current Streak</div>
                            <div id="current-streak" style="font-size: 2rem; font-weight: bold; color: var(--neon-blue);">0 days üî•</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Longest Streak</div>
                            <div id="longest-streak" style="font-size: 2rem; font-weight: bold; color: var(--text-primary);">0 days</div>
                        </div>
                    </div>
                </div>

                <!-- Daily Challenges -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Daily Challenges</h3>
                    <div id="daily-challenges-list" class="challenges-list">
                        <!-- Daily challenges will be loaded here -->
                    </div>
                </div>

                <!-- Weekly Challenges -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Weekly Challenges</h3>
                    <div id="weekly-challenges-list" class="challenges-list">
                        <!-- Weekly challenges will be loaded here -->
                    </div>
                </div>

                <!-- Unlocked Achievements -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Unlocked Achievements</h3>
                    <div id="achievements-unlocked" class="achievements-grid">
                        <!-- Unlocked achievements will be loaded here -->
                    </div>
                </div>

                <!-- Locked Achievements -->
                <div class="glass-panel" style="padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Locked Achievements</h3>
                    <div id="achievements-locked" class="achievements-grid">
                        <!-- Locked achievements will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Shop Page -->
        <section id="page-shop" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Real-World Shop</h2>
                </div>
                <div id="shop-container"></div>
            </div>
        </section>

        <!-- Inventory Page -->
        <section id="page-inventory" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Inventory</h2>
                </div>
                <div id="inventory-container"></div>
            </div>
        </section>

        <!-- History Page -->
        <section id="page-history" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Activity History</h2>
                </div>

                <!-- History Filters -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1rem;">
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.75rem; flex-wrap: wrap;">
                        <input 
                            type="text" 
                            id="history-search-input" 
                            placeholder="Search history..." 
                            style="flex: 1; min-width: 200px; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);"
                        >
                        <select id="history-filter-type" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                            <option value="">All Types</option>
                            <option value="quest_completed">Quest Completed</option>
                            <option value="quest_accepted">Quest Accepted</option>
                            <option value="xp_gain">XP Gained</option>
                            <option value="level_up">Level Up</option>
                            <option value="achievement_unlocked">Achievement</option>
                            <option value="skill_upgrade">Skill Upgrade</option>
                        </select>
                        <button id="btn-history-clear-filters" class="btn-secondary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">
                            Clear Filters
                        </button>
                    </div>
                </div>

                <div id="history-container"></div>
            </div>
        </section>

        <!-- Settings Page -->
        <section id="page-settings" class="page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Settings</h2>
                </div>

                <!-- Data Management -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Data Management</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <button id="btn-export-data" class="btn-primary" style="width: 100%;">
                            üì• Export Data (Backup)
                        </button>
                        <label class="btn-secondary" style="width: 100%; text-align: center; cursor: pointer; padding: 0.75rem;">
                            üì§ Import Data (Restore)
                            <input type="file" id="import-file-input" accept=".json" style="display: none;" />
                        </label>
                    </div>
                </div>

                <!-- Knowledge Library -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Knowledge Library</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        Browse and read knowledge sources that power the quest system.
                    </p>
                    <div id="knowledge-library"></div>
                </div>

                <!-- Shadow Monarch Status -->
                <div class="glass-panel" style="margin-bottom: 1.5rem; padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Class Evolution</h3>
                    <div id="shadow-monarch-status"></div>
                </div>

                <!-- Loot Boxes -->
                <div class="glass-panel" style="padding: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--text-primary);">Loot Boxes</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        Open loot boxes to receive random rewards.
                    </p>
                    <div id="loot-boxes-container"></div>
                </div>
            </div>
        </section>
    </div>

    <!-- Quest Modal -->
    <div id="quest-modal" class="modal">
        <div class="modal-content glass-panel">
            <span class="modal-close">&times;</span>
            <h2 id="quest-modal-title" class="modal-title"></h2>
            <div id="quest-modal-body" class="modal-body"></div>
            <div class="modal-actions">
                <button id="quest-accept-btn" class="btn-primary">Accept Quest</button>
                <button id="quest-complete-btn" class="btn-success" style="display: none;">Submit Report</button>
                <button id="quest-cancel-btn" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="js/database.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/gameEngine.js"></script>
    <script src="js/dataCollection.js"></script>
    <!-- Knowledge Engine System -->
    <script src="js/knowledgeSources.js"></script>
    <script src="js/knowledgeSourcesExtended.js"></script>
    <script src="js/knowledgeIndex.js"></script>
    <script src="js/knowledgeQuestTranslator.js"></script>
    <script src="js/knowledgeEngine.js"></script>
    <script src="js/knowledgeSync.js"></script>
    <script src="js/knowledgeVerification.js"></script>
    <script src="js/knowledgeReader.js"></script>
    <!-- Quest Generation -->
    <script src="js/aiQuestGenerator.js"></script>
    <script src="js/materialRewards.js"></script>
    <script src="js/reportSystem.js"></script>
    <script src="js/backgroundQuestGenerator.js"></script>
    <script src="js/questSystem.js"></script>
    <script src="js/questChains.js"></script>
    <script src="js/dailyChallenges.js"></script>
    <!-- AI Journal & Memory System -->
    <script src="js/aiJournalSystem.js"></script>
    <script src="js/pendingQuestDelivery.js"></script>
    <script src="js/journalSearch.js"></script>
    <!-- New Features -->
    <script src="js/questAnalytics.js"></script>
    <script src="js/dailyReflectionPrompts.js"></script>
    <script src="js/progressCharts.js"></script>
    <script src="js/smartReminders.js"></script>
    <script src="js/questDifficultyAdjustment.js"></script>
    <script src="js/journalAchievements.js"></script>
    <!-- Solo Leveling UI Enhancements -->
    <script src="js/soloLevelingUI.js"></script>
    <!-- Real-World Features -->
    <script src="js/realWorldShop.js"></script>
    <script src="js/energySystem.js"></script>
    <script src="js/activeSkills.js"></script>
    <script src="js/questRewardsScreen.js"></script>
    <script src="js/realWorldCrafting.js"></script>
    <script src="js/lootBoxSystem.js"></script>
    <script src="js/purchaseReporting.js"></script>
    <!-- Solo Leveling Missing Features -->
    <script src="js/statAllocation.js"></script>
    <script src="js/penaltyQuestSystem.js"></script>
    <script src="js/threatDetection.js"></script>
    <script src="js/skillBooks.js"></script>
    <script src="js/passiveSkills.js"></script>
    <script src="js/instantDungeons.js"></script>
    <script src="js/emergencyQuests.js"></script>
    <script src="js/itemRaritySystem.js"></script>
    <!-- Skills & Stats -->
    <script src="js/skillSystem.js"></script>
    <script src="js/skillSynergies.js"></script>
    <!-- New Features -->
    <script src="js/achievementSystem.js"></script>
    <script src="js/streakSystem.js"></script>
    <script src="js/statisticsDashboard.js"></script>
    <script src="js/avatarEvolution.js"></script>
    <script src="js/enhancedHistory.js"></script>
    <script src="js/dataExport.js"></script>
    <script src="js/audioSystem.js"></script>
    <script src="js/shadowMonarch.js"></script>
    <script src="js/detailedInventory.js"></script>
    <!-- UI & Assistant -->
    <script src="js/aiAssistant.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/prayerTimes.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

